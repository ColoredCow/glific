<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.23.0">
    <meta name="project" content="Glific v1.1.5">

    <title>Glific.Contacts â€” Glific v1.1.5</title>
    <link rel="stylesheet" href="dist/elixir-9f91ebe876dc01d67920.css" />

    <script src="dist/sidebar_items-70cc72f525.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-60a0c9f10e9e52eae31f.js"></script>


  </head>
  <body data-type="modules">
    <script>try { if(localStorage.getItem('night-mode') === 'true') document.body.className += ' night-mode'; } catch (e) { }</script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" id="search-list" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="https://glific.io" class="sidebar-projectName">
Glific
      </a>
      <strong class="sidebar-projectVersion">
        v1.1.5
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

      <li><a id="modules-list" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
Glific.Contacts <small class="app-vsn">(Glific v1.1.5)</small>

          <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L1" title="View Source" class="view-source" rel="help">
            <span class="icon-code" aria-hidden="true"></span>
            <span class="sr-only">View Source</span>
          </a>

      </h1>


        <section id="moduledoc">
<p>The Contacts context.</p>
        </section>


        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:option/0">option()</a>

  </div>

</div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#add_permission/2">add_permission(query, user)</a>

  </div>

    <div class="summary-synopsis"><p>Add permissioning specific to groups, in this case we want to restrict the visibility of
groups that the user can see</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#can_send_message_to?/1">can_send_message_to?(contact)</a>

  </div>

    <div class="summary-synopsis"><p>Check if we can send a message to the contact</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#can_send_message_to?/2">can_send_message_to?(contact, is_hsm)</a>

  </div>

    <div class="summary-synopsis"><p>Check if we can send a session message to the contact</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#can_send_message_to?/3">can_send_message_to?(contact, is_hsm, attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Check if we can send a session message to the contact with some extra perameters</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#change_contact/2">change_contact(contact, attrs \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Returns an <code class="inline">%Ecto.Changeset{}</code> for tracking contact changes.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#contact_location/1">contact_location(contact)</a>

  </div>

    <div class="summary-synopsis"><p>Get contact's current location</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#contact_opted_in/4">contact_opted_in(phone, organization_id, utc_time, opts \\ [])</a>

  </div>

    <div class="summary-synopsis"><p>Update DB fields when contact opted in and ignore if it's blocked</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#contact_opted_out/3">contact_opted_out(phone, organization_id, utc_time)</a>

  </div>

    <div class="summary-synopsis"><p>Update DB fields when contact opted out</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#count_contacts/1">count_contacts(args)</a>

  </div>

    <div class="summary-synopsis"><p>Return the count of contacts, using the same filter as list_contacts</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_contact/1">create_contact(attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Creates a contact.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_location/1">create_location(attrs \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Creates a location.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete/3">delete(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a DELETE request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete!/3">delete!(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a DELETE request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete_contact/1">delete_contact(contact)</a>

  </div>

    <div class="summary-synopsis"><p>Deletes a contact.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get/3">get(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a GET request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get!/3">get!(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a GET request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_contact!/1">get_contact!(id)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single contact.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_contact_field_map/1">get_contact_field_map(contact_id)</a>

  </div>

    <div class="summary-synopsis"><p>Convert contact field to map for variable substitution</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#head/3">head(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a HEAD request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#head!/3">head!(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a HEAD request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_contact_blocked?/1">is_contact_blocked?(contact)</a>

  </div>

    <div class="summary-synopsis"><p>check if contact is blocked or not</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_new_contact/1">is_new_contact(contact_id)</a>

  </div>

    <div class="summary-synopsis"><p>Check if this contact id is a new contact.
In general, we should always retrive as little as possible from the DB</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_simulator_contact?/1">is_simulator_contact?(phone)</a>

  </div>

    <div class="summary-synopsis"><p>Lets centralize the code to detect simulator messages and interaction</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_contacts/1">list_contacts(args)</a>

  </div>

    <div class="summary-synopsis"><p>Returns the list of contacts.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_user_contacts/1">list_user_contacts(args \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Return the list of contacts who are also users</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#maybe_create_contact/1">maybe_create_contact(sender)</a>

  </div>

    <div class="summary-synopsis"><p>This function is called by the messaging framework for all incoming messages, hence
might be a good candidate to maintain a contact level cache at some point</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#optin_contact/1">optin_contact(attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Upload a contact phone as opted in</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#options/3">options(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a OPTIONS request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#options!/3">options!(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a OPTIONS request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#patch/4">patch(client, url, body, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a PATCH request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#patch!/4">patch!(client, url, body, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a PATCH request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#post/4">post(client, url, body, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a POST request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#post!/4">post!(client, url, body, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a POST request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put/4">put(client, url, body, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a PUT request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put!/4">put!(client, url, body, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a PUT request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#request/2">request(client \\ %Tesla.Client{}, options)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#request!/2">request!(client \\ %Tesla.Client{}, options)</a>

  </div>

    <div class="summary-synopsis"><p>Perform request and raise in case of error.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#set_session_status/2">set_session_status(contact, status)</a>

  </div>

    <div class="summary-synopsis"><p>Set session status for opted in and opted out contacts</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#trace/3">trace(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a TRACE request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#trace!/3">trace!(client, url, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Perform a TRACE request.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_contact/2">update_contact(contact, attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Updates a contact.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_contact_status/2">update_contact_status(organization_id, args)</a>

  </div>

    <div class="summary-synopsis"><p>Invoked from cron jobs to mass update the status of contacts belonging to
a specific organization</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#upsert/1">upsert(attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Gets or Creates a Contact based on the unique indexes in the table. If there is a match
it returns the existing contact, else it creates a new one</p></div>

</div>

  </div>

        </section>


        <section id="types" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#types">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Types
          </h1>
          <div class="types-list">
<section class="detail" id="t:option/0">

  <div class="detail-header">
    <a href="#t:option/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">option()</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>option() ::
  {:method, <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:method/0">Tesla.Env.method</a>()}
  | {:url, <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>()}
  | {:query, <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:query/0">Tesla.Env.query</a>()}
  | {:headers, <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:headers/0">Tesla.Env.headers</a>()}
  | {:body, <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:body/0">Tesla.Env.body</a>()}
  | {:opts, <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:opts/0">Tesla.Env.opts</a>()}</pre>

      </div>


  </section>
</section>

          </div>
        </section>

        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="add_permission/2">

  <div class="detail-header">
    <a href="#add_permission/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">add_permission(query, user)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L30" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>add_permission(<a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Query.html#t:t/0">Ecto.Query.t</a>(), Glific.Users.User.t()) :: <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Query.html#t:t/0">Ecto.Query.t</a>()</pre>

      </div>

<p>Add permissioning specific to groups, in this case we want to restrict the visibility of
groups that the user can see</p>
  </section>
</section>
<section class="detail" id="can_send_message_to?/1">

  <div class="detail-header">
    <a href="#can_send_message_to?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">can_send_message_to?(contact)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L460" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>can_send_message_to?(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Check if we can send a message to the contact</p>
  </section>
</section>
<section class="detail" id="can_send_message_to?/2">

  <div class="detail-header">
    <a href="#can_send_message_to?/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">can_send_message_to?(contact, is_hsm)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L464" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>can_send_message_to?(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Check if we can send a session message to the contact</p>
  </section>
</section>
<section class="detail" id="can_send_message_to?/3">

  <div class="detail-header">
    <a href="#can_send_message_to?/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">can_send_message_to?(contact, is_hsm, attrs)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L488" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>can_send_message_to?(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Check if we can send a session message to the contact with some extra perameters</p>
  </section>
</section>
<section class="detail" id="change_contact/2">

    <span id="change_contact/1"></span>

  <div class="detail-header">
    <a href="#change_contact/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">change_contact(contact, attrs \\ %{})</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L283" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>change_contact(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()</pre>

      </div>

<p>Returns an <code class="inline">%Ecto.Changeset{}</code> for tracking contact changes.</p><h2 id="change_contact/2-examples" class="section-heading">
  <a href="#change_contact/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="nohighlight makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">change_contact</span><span class="p" data-group-id="0776481843-1">(</span><span class="n">contact</span><span class="p" data-group-id="0776481843-1">)</span><span class="w">
</span><span class="p" data-group-id="0776481843-2">%</span><span class="nc" data-group-id="0776481843-2">Ecto.Changeset</span><span class="p" data-group-id="0776481843-2">{</span><span class="ss">data</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0776481843-3">%</span><span class="nc" data-group-id="0776481843-3">Contact</span><span class="p" data-group-id="0776481843-3">{</span><span class="p" data-group-id="0776481843-3">}</span><span class="p" data-group-id="0776481843-2">}</span></code></pre>
  </section>
</section>
<section class="detail" id="contact_location/1">

  <div class="detail-header">
    <a href="#contact_location/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">contact_location(contact)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L503" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>contact_location(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()) ::
  {:ok, <a href="Glific.Contacts.Location.html#t:t/0">Glific.Contacts.Location.t</a>()}</pre>

      </div>

<p>Get contact's current location</p>
  </section>
</section>
<section class="detail" id="contact_opted_in/4">

    <span id="contact_opted_in/3"></span>

  <div class="detail-header">
    <a href="#contact_opted_in/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">contact_opted_in(phone, organization_id, utc_time, opts \\ [])</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L374" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>contact_opted_in(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Update DB fields when contact opted in and ignore if it's blocked</p>
  </section>
</section>
<section class="detail" id="contact_opted_out/3">

  <div class="detail-header">
    <a href="#contact_opted_out/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">contact_opted_out(phone, organization_id, utc_time)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L429" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>contact_opted_out(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/DateTime.html#t:t/0">DateTime.t</a>()) :: :ok</pre>

      </div>

<p>Update DB fields when contact opted out</p>
  </section>
</section>
<section class="detail" id="count_contacts/1">

  <div class="detail-header">
    <a href="#count_contacts/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">count_contacts(args)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L82" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>count_contacts(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()</pre>

      </div>

<p>Return the count of contacts, using the same filter as list_contacts</p>
  </section>
</section>
<section class="detail" id="create_contact/1">

  <div class="detail-header">
    <a href="#create_contact/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_contact(attrs)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L199" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>create_contact(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Creates a contact.</p><h2 id="create_contact/1-examples" class="section-heading">
  <a href="#create_contact/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="nohighlight makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">create_contact</span><span class="p" data-group-id="1664141511-1">(</span><span class="p" data-group-id="1664141511-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="1664141511-2">}</span><span class="p" data-group-id="1664141511-1">)</span><span class="w">
</span><span class="p" data-group-id="1664141511-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1664141511-4">%</span><span class="nc" data-group-id="1664141511-4">Contact</span><span class="p" data-group-id="1664141511-4">{</span><span class="p" data-group-id="1664141511-4">}</span><span class="p" data-group-id="1664141511-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">create_contact</span><span class="p" data-group-id="1664141511-5">(</span><span class="p" data-group-id="1664141511-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="1664141511-6">}</span><span class="p" data-group-id="1664141511-5">)</span><span class="w">
</span><span class="p" data-group-id="1664141511-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1664141511-8">%</span><span class="nc" data-group-id="1664141511-8">Ecto.Changeset</span><span class="p" data-group-id="1664141511-8">{</span><span class="p" data-group-id="1664141511-8">}</span><span class="p" data-group-id="1664141511-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_location/1">

    <span id="create_location/0"></span>

  <div class="detail-header">
    <a href="#create_location/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_location(attrs \\ %{})</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L524" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>create_location(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Location.html#t:t/0">Glific.Contacts.Location.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Creates a location.</p><h2 id="create_location/1-examples" class="section-heading">
  <a href="#create_location/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="nohighlight makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="nc">Glific.Contacts</span><span class="o">.</span><span class="n">create_location</span><span class="p" data-group-id="1615529567-1">(</span><span class="p" data-group-id="1615529567-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="1615529567-2">}</span><span class="p" data-group-id="1615529567-1">)</span><span class="w">
</span><span class="p" data-group-id="1615529567-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1615529567-4">%</span><span class="nc" data-group-id="1615529567-4">Glific.Contacts.Location</span><span class="p" data-group-id="1615529567-4">{</span><span class="p" data-group-id="1615529567-4">}</span><span class="p" data-group-id="1615529567-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Glific.Contacts</span><span class="o">.</span><span class="n">create_location</span><span class="p" data-group-id="1615529567-5">(</span><span class="p" data-group-id="1615529567-6">%{</span><span class="ss">bad_field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="1615529567-6">}</span><span class="p" data-group-id="1615529567-5">)</span><span class="w">
</span><span class="p" data-group-id="1615529567-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1615529567-8">%</span><span class="nc" data-group-id="1615529567-8">Ecto.Changeset</span><span class="p" data-group-id="1615529567-8">{</span><span class="p" data-group-id="1615529567-8">}</span><span class="p" data-group-id="1615529567-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="delete/3">

  <div class="detail-header">
    <a href="#delete/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">delete(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>delete(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a DELETE request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">delete</span><span class="p" data-group-id="2558197839-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="2558197839-1">)</span><span class="w">
</span><span class="n">delete</span><span class="p" data-group-id="2558197839-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2558197839-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="2558197839-3">]</span><span class="p" data-group-id="2558197839-2">)</span><span class="w">
</span><span class="n">delete</span><span class="p" data-group-id="2558197839-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="2558197839-4">)</span><span class="w">
</span><span class="n">delete</span><span class="p" data-group-id="2558197839-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2558197839-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="2558197839-6">]</span><span class="p" data-group-id="2558197839-5">)</span><span class="w">
</span><span class="n">delete</span><span class="p" data-group-id="2558197839-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2558197839-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="2558197839-8">}</span><span class="p" data-group-id="2558197839-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="delete!/3">

  <div class="detail-header">
    <a href="#delete!/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">delete!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>delete!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a DELETE request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">delete!</span><span class="p" data-group-id="9779213980-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="9779213980-1">)</span><span class="w">
</span><span class="n">delete!</span><span class="p" data-group-id="9779213980-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9779213980-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="9779213980-3">]</span><span class="p" data-group-id="9779213980-2">)</span><span class="w">
</span><span class="n">delete!</span><span class="p" data-group-id="9779213980-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="9779213980-4">)</span><span class="w">
</span><span class="n">delete!</span><span class="p" data-group-id="9779213980-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9779213980-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="9779213980-6">]</span><span class="p" data-group-id="9779213980-5">)</span><span class="w">
</span><span class="n">delete!</span><span class="p" data-group-id="9779213980-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9779213980-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="9779213980-8">}</span><span class="p" data-group-id="9779213980-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="delete_contact/1">

  <div class="detail-header">
    <a href="#delete_contact/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">delete_contact(contact)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L267" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>delete_contact(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Deletes a contact.</p><h2 id="delete_contact/1-examples" class="section-heading">
  <a href="#delete_contact/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="nohighlight makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">delete_contact</span><span class="p" data-group-id="4382989358-1">(</span><span class="n">contact</span><span class="p" data-group-id="4382989358-1">)</span><span class="w">
</span><span class="p" data-group-id="4382989358-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4382989358-3">%</span><span class="nc" data-group-id="4382989358-3">Contact</span><span class="p" data-group-id="4382989358-3">{</span><span class="p" data-group-id="4382989358-3">}</span><span class="p" data-group-id="4382989358-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">delete_contact</span><span class="p" data-group-id="4382989358-4">(</span><span class="n">contact</span><span class="p" data-group-id="4382989358-4">)</span><span class="w">
</span><span class="p" data-group-id="4382989358-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4382989358-6">%</span><span class="nc" data-group-id="4382989358-6">Ecto.Changeset</span><span class="p" data-group-id="4382989358-6">{</span><span class="p" data-group-id="4382989358-6">}</span><span class="p" data-group-id="4382989358-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="get/3">

  <div class="detail-header">
    <a href="#get/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>get(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a GET request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">get</span><span class="p" data-group-id="7595272758-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="7595272758-1">)</span><span class="w">
</span><span class="n">get</span><span class="p" data-group-id="7595272758-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7595272758-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="7595272758-3">]</span><span class="p" data-group-id="7595272758-2">)</span><span class="w">
</span><span class="n">get</span><span class="p" data-group-id="7595272758-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="7595272758-4">)</span><span class="w">
</span><span class="n">get</span><span class="p" data-group-id="7595272758-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7595272758-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="7595272758-6">]</span><span class="p" data-group-id="7595272758-5">)</span><span class="w">
</span><span class="n">get</span><span class="p" data-group-id="7595272758-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7595272758-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="7595272758-8">}</span><span class="p" data-group-id="7595272758-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="get!/3">

  <div class="detail-header">
    <a href="#get!/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>get!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a GET request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">get!</span><span class="p" data-group-id="5970374204-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="5970374204-1">)</span><span class="w">
</span><span class="n">get!</span><span class="p" data-group-id="5970374204-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5970374204-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="5970374204-3">]</span><span class="p" data-group-id="5970374204-2">)</span><span class="w">
</span><span class="n">get!</span><span class="p" data-group-id="5970374204-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="5970374204-4">)</span><span class="w">
</span><span class="n">get!</span><span class="p" data-group-id="5970374204-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5970374204-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="5970374204-6">]</span><span class="p" data-group-id="5970374204-5">)</span><span class="w">
</span><span class="n">get!</span><span class="p" data-group-id="5970374204-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5970374204-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="5970374204-8">}</span><span class="p" data-group-id="5970374204-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_contact!/1">

  <div class="detail-header">
    <a href="#get_contact!/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_contact!(id)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L179" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>get_contact!(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()</pre>

      </div>

<p>Gets a single contact.</p><p>Raises <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the Contact does not exist.</p><h2 id="get_contact!/1-examples" class="section-heading">
  <a href="#get_contact!/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="nohighlight makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_contact!</span><span class="p" data-group-id="5295216785-1">(</span><span class="mi">123</span><span class="p" data-group-id="5295216785-1">)</span><span class="w">
</span><span class="p" data-group-id="5295216785-2">%</span><span class="nc" data-group-id="5295216785-2">Contact</span><span class="p" data-group-id="5295216785-2">{</span><span class="p" data-group-id="5295216785-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">get_contact!</span><span class="p" data-group-id="5295216785-3">(</span><span class="mi">456</span><span class="p" data-group-id="5295216785-3">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_contact_field_map/1">

  <div class="detail-header">
    <a href="#get_contact_field_map/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_contact_field_map(contact_id)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L616" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>get_contact_field_map(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()</pre>

      </div>

<p>Convert contact field to map for variable substitution</p>
  </section>
</section>
<section class="detail" id="head/3">

  <div class="detail-header">
    <a href="#head/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">head(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>head(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a HEAD request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">head</span><span class="p" data-group-id="8209455537-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="8209455537-1">)</span><span class="w">
</span><span class="n">head</span><span class="p" data-group-id="8209455537-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8209455537-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="8209455537-3">]</span><span class="p" data-group-id="8209455537-2">)</span><span class="w">
</span><span class="n">head</span><span class="p" data-group-id="8209455537-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="8209455537-4">)</span><span class="w">
</span><span class="n">head</span><span class="p" data-group-id="8209455537-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8209455537-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="8209455537-6">]</span><span class="p" data-group-id="8209455537-5">)</span><span class="w">
</span><span class="n">head</span><span class="p" data-group-id="8209455537-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8209455537-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="8209455537-8">}</span><span class="p" data-group-id="8209455537-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="head!/3">

  <div class="detail-header">
    <a href="#head!/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">head!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>head!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a HEAD request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">head!</span><span class="p" data-group-id="3708591563-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="3708591563-1">)</span><span class="w">
</span><span class="n">head!</span><span class="p" data-group-id="3708591563-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3708591563-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="3708591563-3">]</span><span class="p" data-group-id="3708591563-2">)</span><span class="w">
</span><span class="n">head!</span><span class="p" data-group-id="3708591563-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="3708591563-4">)</span><span class="w">
</span><span class="n">head!</span><span class="p" data-group-id="3708591563-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3708591563-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="3708591563-6">]</span><span class="p" data-group-id="3708591563-5">)</span><span class="w">
</span><span class="n">head!</span><span class="p" data-group-id="3708591563-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3708591563-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3708591563-8">}</span><span class="p" data-group-id="3708591563-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="is_contact_blocked?/1">

  <div class="detail-header">
    <a href="#is_contact_blocked?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_contact_blocked?(contact)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L589" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>is_contact_blocked?(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>check if contact is blocked or not</p>
  </section>
</section>
<section class="detail" id="is_new_contact/1">

  <div class="detail-header">
    <a href="#is_new_contact/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_new_contact(contact_id)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L357" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>is_new_contact(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">integer</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Check if this contact id is a new contact.
In general, we should always retrive as little as possible from the DB</p>
  </section>
</section>
<section class="detail" id="is_simulator_contact?/1">

  <div class="detail-header">
    <a href="#is_simulator_contact?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_simulator_contact?(phone)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L654" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>is_simulator_contact?(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Lets centralize the code to detect simulator messages and interaction</p>
  </section>
</section>
<section class="detail" id="list_contacts/1">

  <div class="detail-header">
    <a href="#list_contacts/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_contacts(args)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L59" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>list_contacts(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: [<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()]</pre>

      </div>

<p>Returns the list of contacts.</p><h2 id="list_contacts/1-examples" class="section-heading">
  <a href="#list_contacts/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="nohighlight makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">list_contacts</span><span class="p" data-group-id="4798635781-1">(</span><span class="p" data-group-id="4798635781-1">)</span><span class="w">
</span><span class="p" data-group-id="4798635781-2">[</span><span class="p" data-group-id="4798635781-3">%</span><span class="nc" data-group-id="4798635781-3">Contact</span><span class="p" data-group-id="4798635781-3">{</span><span class="p" data-group-id="4798635781-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="4798635781-2">]</span></code></pre><p>Get the list of contacts filtered by various search options
Include contacts only if within list of groups
Include contacts only if have list of tags</p>
  </section>
</section>
<section class="detail" id="list_user_contacts/1">

    <span id="list_user_contacts/0"></span>

  <div class="detail-header">
    <a href="#list_user_contacts/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_user_contacts(args \\ %{})</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L70" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>list_user_contacts(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: [<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()]</pre>

      </div>

<p>Return the list of contacts who are also users</p>
  </section>
</section>
<section class="detail" id="maybe_create_contact/1">

  <div class="detail-header">
    <a href="#maybe_create_contact/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">maybe_create_contact(sender)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L331" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>maybe_create_contact(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>This function is called by the messaging framework for all incoming messages, hence
might be a good candidate to maintain a contact level cache at some point</p><p>We use a fetch followed by create, to avoid the explosion in the id namespace. We also
avoid updating the contact to skip the DB call, and only do so if the name has changed</p>
  </section>
</section>
<section class="detail" id="optin_contact/1">

  <div class="detail-header">
    <a href="#optin_contact/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">optin_contact(attrs)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L603" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>optin_contact(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()}
  | {:error, <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}
  | {:error, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()}</pre>

      </div>

<p>Upload a contact phone as opted in</p>
  </section>
</section>
<section class="detail" id="options/3">

  <div class="detail-header">
    <a href="#options/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">options(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>options(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a OPTIONS request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">options</span><span class="p" data-group-id="3230195240-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="3230195240-1">)</span><span class="w">
</span><span class="n">options</span><span class="p" data-group-id="3230195240-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3230195240-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="3230195240-3">]</span><span class="p" data-group-id="3230195240-2">)</span><span class="w">
</span><span class="n">options</span><span class="p" data-group-id="3230195240-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="3230195240-4">)</span><span class="w">
</span><span class="n">options</span><span class="p" data-group-id="3230195240-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3230195240-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="3230195240-6">]</span><span class="p" data-group-id="3230195240-5">)</span><span class="w">
</span><span class="n">options</span><span class="p" data-group-id="3230195240-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3230195240-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3230195240-8">}</span><span class="p" data-group-id="3230195240-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="options!/3">

  <div class="detail-header">
    <a href="#options!/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">options!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>options!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a OPTIONS request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">options!</span><span class="p" data-group-id="7376702667-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="7376702667-1">)</span><span class="w">
</span><span class="n">options!</span><span class="p" data-group-id="7376702667-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7376702667-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="7376702667-3">]</span><span class="p" data-group-id="7376702667-2">)</span><span class="w">
</span><span class="n">options!</span><span class="p" data-group-id="7376702667-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="7376702667-4">)</span><span class="w">
</span><span class="n">options!</span><span class="p" data-group-id="7376702667-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7376702667-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="7376702667-6">]</span><span class="p" data-group-id="7376702667-5">)</span><span class="w">
</span><span class="n">options!</span><span class="p" data-group-id="7376702667-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7376702667-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="7376702667-8">}</span><span class="p" data-group-id="7376702667-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="patch/4">

  <div class="detail-header">
    <a href="#patch/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">patch(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>patch(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a PATCH request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">patch</span><span class="p" data-group-id="7717983716-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7717983716-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="7717983716-2">}</span><span class="p" data-group-id="7717983716-1">)</span><span class="w">
</span><span class="n">patch</span><span class="p" data-group-id="7717983716-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7717983716-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="7717983716-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7717983716-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="7717983716-5">]</span><span class="p" data-group-id="7717983716-3">)</span><span class="w">
</span><span class="n">patch</span><span class="p" data-group-id="7717983716-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7717983716-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="7717983716-7">}</span><span class="p" data-group-id="7717983716-6">)</span><span class="w">
</span><span class="n">patch</span><span class="p" data-group-id="7717983716-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7717983716-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="7717983716-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7717983716-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="7717983716-10">]</span><span class="p" data-group-id="7717983716-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="patch!/4">

  <div class="detail-header">
    <a href="#patch!/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">patch!(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>patch!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a PATCH request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">patch!</span><span class="p" data-group-id="8116661418-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8116661418-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="8116661418-2">}</span><span class="p" data-group-id="8116661418-1">)</span><span class="w">
</span><span class="n">patch!</span><span class="p" data-group-id="8116661418-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8116661418-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="8116661418-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8116661418-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="8116661418-5">]</span><span class="p" data-group-id="8116661418-3">)</span><span class="w">
</span><span class="n">patch!</span><span class="p" data-group-id="8116661418-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8116661418-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="8116661418-7">}</span><span class="p" data-group-id="8116661418-6">)</span><span class="w">
</span><span class="n">patch!</span><span class="p" data-group-id="8116661418-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8116661418-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="8116661418-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8116661418-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="8116661418-10">]</span><span class="p" data-group-id="8116661418-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="post/4">

  <div class="detail-header">
    <a href="#post/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">post(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>post(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a POST request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">post</span><span class="p" data-group-id="0405329141-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0405329141-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0405329141-2">}</span><span class="p" data-group-id="0405329141-1">)</span><span class="w">
</span><span class="n">post</span><span class="p" data-group-id="0405329141-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0405329141-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0405329141-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0405329141-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="0405329141-5">]</span><span class="p" data-group-id="0405329141-3">)</span><span class="w">
</span><span class="n">post</span><span class="p" data-group-id="0405329141-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0405329141-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0405329141-7">}</span><span class="p" data-group-id="0405329141-6">)</span><span class="w">
</span><span class="n">post</span><span class="p" data-group-id="0405329141-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0405329141-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0405329141-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0405329141-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="0405329141-10">]</span><span class="p" data-group-id="0405329141-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="post!/4">

  <div class="detail-header">
    <a href="#post!/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">post!(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>post!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a POST request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">post!</span><span class="p" data-group-id="0952633810-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0952633810-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0952633810-2">}</span><span class="p" data-group-id="0952633810-1">)</span><span class="w">
</span><span class="n">post!</span><span class="p" data-group-id="0952633810-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0952633810-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0952633810-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0952633810-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="0952633810-5">]</span><span class="p" data-group-id="0952633810-3">)</span><span class="w">
</span><span class="n">post!</span><span class="p" data-group-id="0952633810-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0952633810-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0952633810-7">}</span><span class="p" data-group-id="0952633810-6">)</span><span class="w">
</span><span class="n">post!</span><span class="p" data-group-id="0952633810-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0952633810-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="0952633810-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0952633810-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="0952633810-10">]</span><span class="p" data-group-id="0952633810-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="put/4">

  <div class="detail-header">
    <a href="#put/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">put(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>put(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a PUT request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">put</span><span class="p" data-group-id="3969741668-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3969741668-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3969741668-2">}</span><span class="p" data-group-id="3969741668-1">)</span><span class="w">
</span><span class="n">put</span><span class="p" data-group-id="3969741668-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3969741668-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3969741668-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3969741668-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="3969741668-5">]</span><span class="p" data-group-id="3969741668-3">)</span><span class="w">
</span><span class="n">put</span><span class="p" data-group-id="3969741668-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3969741668-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3969741668-7">}</span><span class="p" data-group-id="3969741668-6">)</span><span class="w">
</span><span class="n">put</span><span class="p" data-group-id="3969741668-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3969741668-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="3969741668-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3969741668-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="3969741668-10">]</span><span class="p" data-group-id="3969741668-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="put!/4">

  <div class="detail-header">
    <a href="#put!/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">put!(client, url, body, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>put!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:body/0">Tesla.Env.body</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a PUT request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">put!</span><span class="p" data-group-id="1072633815-1">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1072633815-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="1072633815-2">}</span><span class="p" data-group-id="1072633815-1">)</span><span class="w">
</span><span class="n">put!</span><span class="p" data-group-id="1072633815-3">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1072633815-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="1072633815-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1072633815-5">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="1072633815-5">]</span><span class="p" data-group-id="1072633815-3">)</span><span class="w">
</span><span class="n">put!</span><span class="p" data-group-id="1072633815-6">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1072633815-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="1072633815-7">}</span><span class="p" data-group-id="1072633815-6">)</span><span class="w">
</span><span class="n">put!</span><span class="p" data-group-id="1072633815-8">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1072633815-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="1072633815-9">}</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1072633815-10">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="1072633815-10">]</span><span class="p" data-group-id="1072633815-8">)</span></code></pre>
  </section>
</section>
<section class="detail" id="request/2">

    <span id="request/1"></span>

  <div class="detail-header">
    <a href="#request/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">request(client \\ %Tesla.Client{}, options)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>request(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a request.</p><h2 id="request/2-options" class="section-heading">
  <a href="#request/2-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Options
</h2>
<ul><li><code class="inline">:method</code> - the request method, one of [:head, :get, :delete, :trace, :options, :post, :put, :patch]</li><li><code class="inline">:url</code> - either full url e.g. &quot;<a href="http://example.com/some/path%22">http://example.com/some/path&quot;</a> or just &quot;/some/path&quot; if using <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Middleware.BaseUrl.html"><code class="inline">Tesla.Middleware.BaseUrl</code></a></li><li><code class="inline">:query</code> - a keyword list of query params, e.g. <code class="inline">[page: 1, per_page: 100]</code></li><li><code class="inline">:headers</code> - a keyworld list of headers, e.g. <code class="inline">[{&quot;content-type&quot;, &quot;text/plain&quot;}]</code></li><li><code class="inline">:body</code> - depends on used middleware:<ul><li>by default it can be a binary</li><li>if using e.g. JSON encoding middleware it can be a nested map</li><li>if adapter supports it it can be a Stream with any of the above</li></ul></li><li><code class="inline">:opts</code> - custom, per-request middleware or adapter options</li></ul><h2 id="request/2-examples" class="section-heading">
  <a href="#request/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="nohighlight makeup elixir"><span class="nc">ExampleApi</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="2090535400-1">(</span><span class="ss">method</span><span class="p">:</span><span class="w"> </span><span class="ss">:get</span><span class="p">,</span><span class="w"> </span><span class="ss">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/users/path&quot;</span><span class="p" data-group-id="2090535400-1">)</span><span class="w">

</span><span class="c1"># use shortcut methods</span><span class="w">
</span><span class="nc">ExampleApi</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="2090535400-2">(</span><span class="s">&quot;/users/1&quot;</span><span class="p" data-group-id="2090535400-2">)</span><span class="w">
</span><span class="nc">ExampleApi</span><span class="o">.</span><span class="n">post</span><span class="p" data-group-id="2090535400-3">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2090535400-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="2090535400-4">}</span><span class="p" data-group-id="2090535400-3">)</span></code></pre>
  </section>
</section>
<section class="detail" id="request!/2">

    <span id="request!/1"></span>

  <div class="detail-header">
    <a href="#request!/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">request!(client \\ %Tesla.Client{}, options)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>request!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform request and raise in case of error.</p><p>This is similar to <a href="#request/2"><code class="inline">request/2</code></a> behaviour from Tesla 0.x</p><p>See <a href="#request/2"><code class="inline">request/2</code></a> for list of available options.</p>
  </section>
</section>
<section class="detail" id="set_session_status/2">

  <div class="detail-header">
    <a href="#set_session_status/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">set_session_status(contact, status)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L555" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>set_session_status(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>() | [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()], <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()} | :ok</pre>

      </div>

<p>Set session status for opted in and opted out contacts</p>
  </section>
</section>
<section class="detail" id="trace/3">

  <div class="detail-header">
    <a href="#trace/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">trace(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>trace(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) :: <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:result/0">Tesla.Env.result</a>()</pre>

      </div>

<p>Perform a TRACE request.</p><p>See <a href="#request/1"><code class="inline">request/1</code></a> or <a href="#request/2"><code class="inline">request/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">trace</span><span class="p" data-group-id="5183892930-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="5183892930-1">)</span><span class="w">
</span><span class="n">trace</span><span class="p" data-group-id="5183892930-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5183892930-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="5183892930-3">]</span><span class="p" data-group-id="5183892930-2">)</span><span class="w">
</span><span class="n">trace</span><span class="p" data-group-id="5183892930-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="5183892930-4">)</span><span class="w">
</span><span class="n">trace</span><span class="p" data-group-id="5183892930-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5183892930-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="5183892930-6">]</span><span class="p" data-group-id="5183892930-5">)</span><span class="w">
</span><span class="n">trace</span><span class="p" data-group-id="5183892930-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5183892930-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="5183892930-8">}</span><span class="p" data-group-id="5183892930-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="trace!/3">

  <div class="detail-header">
    <a href="#trace!/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">trace!(client, url, opts)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L7" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>trace!(<a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:client/0">Tesla.Env.client</a>(), <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:url/0">Tesla.Env.url</a>(), [<a href="#t:option/0">option</a>()]) ::
  <a href="https://hexdocs.pm/tesla/1.4.0/Tesla.Env.html#t:t/0">Tesla.Env.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Perform a TRACE request.</p><p>See <a href="#request!/1"><code class="inline">request!/1</code></a> or <a href="#request!/2"><code class="inline">request!/2</code></a> for options definition.</p><pre><code class="nohighlight makeup elixir"><span class="n">trace!</span><span class="p" data-group-id="5541290345-1">(</span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="5541290345-1">)</span><span class="w">
</span><span class="n">trace!</span><span class="p" data-group-id="5541290345-2">(</span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5541290345-3">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="5541290345-3">]</span><span class="p" data-group-id="5541290345-2">)</span><span class="w">
</span><span class="n">trace!</span><span class="p" data-group-id="5541290345-4">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p" data-group-id="5541290345-4">)</span><span class="w">
</span><span class="n">trace!</span><span class="p" data-group-id="5541290345-5">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">query</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5541290345-6">[</span><span class="ss">scope</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="5541290345-6">]</span><span class="p" data-group-id="5541290345-5">)</span><span class="w">
</span><span class="n">trace!</span><span class="p" data-group-id="5541290345-7">(</span><span class="n">client</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/users&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5541290345-8">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Jon&quot;</span><span class="p" data-group-id="5541290345-8">}</span><span class="p" data-group-id="5541290345-7">)</span></code></pre>
  </section>
</section>
<section class="detail" id="update_contact/2">

  <div class="detail-header">
    <a href="#update_contact/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_contact(contact, attrs)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L229" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>update_contact(<a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) ::
  {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()} | {:error, <a href="https://hexdocs.pm/ecto/3.5.8/Ecto.Changeset.html#t:t/0">Ecto.Changeset.t</a>()}</pre>

      </div>

<p>Updates a contact.</p><h2 id="update_contact/2-examples" class="section-heading">
  <a href="#update_contact/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="nohighlight makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">update_contact</span><span class="p" data-group-id="9024378963-1">(</span><span class="n">contact</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9024378963-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">new_value</span><span class="p" data-group-id="9024378963-2">}</span><span class="p" data-group-id="9024378963-1">)</span><span class="w">
</span><span class="p" data-group-id="9024378963-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9024378963-4">%</span><span class="nc" data-group-id="9024378963-4">Contact</span><span class="p" data-group-id="9024378963-4">{</span><span class="p" data-group-id="9024378963-4">}</span><span class="p" data-group-id="9024378963-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">update_contact</span><span class="p" data-group-id="9024378963-5">(</span><span class="n">contact</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9024378963-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="9024378963-6">}</span><span class="p" data-group-id="9024378963-5">)</span><span class="w">
</span><span class="p" data-group-id="9024378963-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9024378963-8">%</span><span class="nc" data-group-id="9024378963-8">Ecto.Changeset</span><span class="p" data-group-id="9024378963-8">{</span><span class="p" data-group-id="9024378963-8">}</span><span class="p" data-group-id="9024378963-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="update_contact_status/2">

  <div class="detail-header">
    <a href="#update_contact_status/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_contact_status(organization_id, args)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L539" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>update_contact_status(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: :ok</pre>

      </div>

<p>Invoked from cron jobs to mass update the status of contacts belonging to
a specific organization</p><p>In this case, if we can, we might want to do it across the entire DB since the
update is across all organizations. The main issue might be the row level security
of postgres and how it ties in. For now, lets stick to per organization</p>
  </section>
</section>
<section class="detail" id="upsert/1">

  <div class="detail-header">
    <a href="#upsert/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">upsert(attrs)</h1>

      <a href="https://github.com/glific/glific/blob/master/lib/glific/contacts.ex#L292" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>upsert(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: {:ok, <a href="Glific.Contacts.Contact.html#t:t/0">Glific.Contacts.Contact.t</a>()}</pre>

      </div>

<p>Gets or Creates a Contact based on the unique indexes in the table. If there is a match
it returns the existing contact, else it creates a new one</p>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.23.0) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
